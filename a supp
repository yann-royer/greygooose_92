<!-- requete php pour recupérer les activiters -->

<?php
$userId = $_SESSION['user_id'];

$sql = "
    SELECT
        id,
        sport,
        title,
        distance,
        duration,
        date_time
    FROM Activity
    WHERE user_id = :user_id
    ORDER BY date_time DESC
    LIMIT 20
";

$stmt = $pdo->prepare($sql);
$stmt->execute([
    'user_id' => $userId
]);

$activities = $stmt->fetchAll();
?>

<!-- Affichage des activités -->
<main class="activity-feed">

    <h1>Mes activités récentes</h1>

    <?php if (empty($activities)) : ?>
        <p>Tu n as encore enregistré aucune activité.</p>
    <?php else : ?>
        <?php foreach ($activities as $activity) : ?>
            <article class="activity-card">

                <h2><?= htmlspecialchars($activity['title']) ?></h2>

                <p>
                    <?= htmlspecialchars($activity['sport']) ?>
                    · <?= htmlspecialchars($activity['distance']) ?> km
                    · <?= htmlspecialchars($activity['duration']) ?>
                </p>

                <p>
                    <?= htmlspecialchars($activity['date_time']) ?>
                </p>

                <a href="activity_view.php?id=<?= $activity['id'] ?>">
                    Voir l activité
                </a>

            </article>
        <?php endforeach; ?>
    <?php endif; ?>

</main>